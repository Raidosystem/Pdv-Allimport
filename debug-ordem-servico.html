<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Ordem de ServiÃ§o - Debug</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .debug-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; }
        .error { color: red; }
        .success { color: green; }
        .info { color: blue; }
        pre { background: #f5f5f5; padding: 10px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>ğŸ” Debug - Teste de Ordem de ServiÃ§o</h1>
    
    <div class="debug-section">
        <h3>ğŸ“‹ InstruÃ§Ãµes para Debug:</h3>
        <ol>
            <li><strong>Abra o Console do Navegador</strong> (F12 â†’ Console)</li>
            <li><strong>VÃ¡ para:</strong> <a href="http://localhost:5186/ordens-servico" target="_blank">http://localhost:5186/ordens-servico</a></li>
            <li><strong>Clique em:</strong> "Nova Ordem de ServiÃ§o"</li>
            <li><strong>Preencha os campos:</strong>
                <ul>
                    <li>Cliente: Selecione ou crie um cliente</li>
                    <li>Tipo: Celular</li>
                    <li>Marca: Samsung</li>
                    <li>Modelo: Galaxy A10</li>
                    <li>Defeito Relatado: NÃ£o liga</li>
                </ul>
            </li>
            <li><strong>Clique em "Salvar"</strong></li>
            <li><strong>Observe os logs no console que devem aparecer assim:</strong></li>
        </ol>
    </div>

    <div class="debug-section">
        <h3>ğŸ› Logs Esperados no Console:</h3>
        <pre>
ğŸ“ [DEBUG FORM] Dados recebidos do formulÃ¡rio: {tipo: "Celular", marca: "Samsung", ...}
ğŸ‘¤ [DEBUG FORM] Cliente selecionado: {id: "...", nome: "...", telefone: "..."}
âœ… [DEBUG FORM] Checklist: {aparelho_liga: true, ...}
ğŸš€ [DEBUG FORM] Enviando para o serviÃ§o: {cliente_nome: "...", tipo: "Celular", ...}

ğŸš€ [DEBUG] Iniciando criaÃ§Ã£o de ordem: {cliente_nome: "...", tipo: "Celular", ...}
ğŸ§‘ [DEBUG] Criando/buscando cliente: {nome: "...", telefone: "..."}
âœ… [DEBUG] Cliente processado: {id: "...", nome: "..."}
ğŸ“‹ [DEBUG] NÃºmero OS gerado: OS-20240915-001
ğŸ“¦ [DEBUG] Dados da nova ordem preparados: {numero_os: "...", cliente_id: "...", ...}
ğŸ’¾ [DEBUG] Resultado da inserÃ§Ã£o: {data: {...}, error: null}
âœ… [DEBUG] Ordem criada com sucesso: {id: "...", numero_os: "...", ...}
        </pre>
    </div>

    <div class="debug-section">
        <h3>âŒ Se houver erro, vocÃª verÃ¡:</h3>
        <pre>
âŒ [DEBUG] Erro ao criar ordem: {message: "...", details: "...", ...}
        </pre>
    </div>

    <div class="debug-section">
        <h3>ğŸ”§ Checklist de Problemas Comuns:</h3>
        <ul>
            <li>âœ… Cliente estÃ¡ sendo selecionado/criado?</li>
            <li>âœ… Campos obrigatÃ³rios estÃ£o preenchidos?</li>
            <li>âœ… Defeito relatado tem pelo menos 5 caracteres?</li>
            <li>âœ… ConexÃ£o com o Supabase estÃ¡ funcionando?</li>
            <li>âœ… UsuÃ¡rio estÃ¡ autenticado?</li>
            <li>âœ… PolÃ­ticas RLS permitem inserÃ§Ã£o?</li>
        </ul>
    </div>

    <div class="debug-section">
        <h3>ğŸ—„ï¸ Para testar diretamente no banco:</h3>
        <p>Execute no SQL Editor do Supabase o conteÃºdo do arquivo: <code>teste-insercao-rapida.sql</code></p>
    </div>

    <script>
        console.log('ğŸš€ PÃ¡gina de debug carregada - pronta para testar ordem de serviÃ§o');
        console.log('ğŸ“ VÃ¡ para http://localhost:5186/ordens-servico e tente criar uma OS');
        console.log('ğŸ‘€ Observe os logs que aparecem aqui no console');
    </script>
</body>
</html>